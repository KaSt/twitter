extends layout

block styles
  link(rel='stylesheet', href='/css/style.css')

block content
  include components/menu

  .container(style="margin-top: 15px; margin-bottom: 15px;")
    .row
      .col-md-3
        if user
          .list-group
            .list-group-item
              h4.list-group-item-heading
                a.text-gray-dark(href="/users/" + user.name)=  user.fullname
              p.list-group-item-text
                a.text-muted(href="/users/" + user.name) @#{user.name}
            .list-group-item
              p.list-group-item-text.text-muted TWEETS
              h4.list-group-item-heading
                a(href="/users/" + user.name) #{tweets_count}
              p.list-group-item-text.text-muted FOLLOWINGS
              h4.list-group-item-heading
                a(href="/users/" + user.name + "/followings") #{followings_count}
              p.list-group-item-text.text-muted FOLLOWERS
              h4.list-group-item-heading
                a(href="/users/" + user.name + "/followers") #{followers_count}

      .col-md-6
        if !tweets_count
          ul.list-group
            li.list-group-item
              div
                form(action="/tweets" method="post")
                  include components/messages.jade
                  p
                    textarea.form-control(name="tweet[text]" placeholder="What's happening?" rows="3")
                  p
                    button.btn.btn-info.pull-right(type="submit") Tweet
                    //- .pull-right fails with a button in panel. - https://github.com/twbs/bootstrap/issues/8843
                    .clearfix
          p.lead You haven't tweeted yet.
        else
          ul.list-group
            li.list-group-item
              div
                form(action="/tweets" method="post")
                  include components/messages.jade
                  p
                    textarea.form-control(name="tweet[text]" placeholder="What's happening?" rows="3")
                  p
                    button.btn.btn-info.pull-right(type="submit") Tweet
                    //- .pull-right fails with a button in panel. - https://github.com/twbs/bootstrap/issues/8843
                    .clearfix
            each tweet in tweets
              li.list-group-item
                p.list-group-item-heading
                  a(href="/users/" + tweet.user.name)
                    strong #{tweet.user.fullname}
                    span &nbsp;
                    span.text-muted @#{tweet.user.name}
                    span &nbsp;-&nbsp;
                    span.text-muted= tweet.created_at
                p.list-group-item-text(style="word-wrap: break-word;")= tweet.text

          include components/pager

        //- if !tweets_count
        //-   p.lead You haven't tweeted yet.
        //- else
        //-   ul.list-group
        //-     each tweet in tweets
        //-       li.list-group-item
        //-         p.list-group-item-heading
        //-           a(href="/users/" + tweet.user.name)
        //-             strong #{tweet.user.fullname}
        //-             span &nbsp;
        //-             span.text-muted @#{tweet.user.name}
        //-             span &nbsp;-&nbsp;
        //-             span.text-muted= tweet.created_at
        //-         p.list-group-item-text(style="word-wrap: break-word;")= tweet.text

        //- include components/pager

      .col-md-3
        if suggestions.length
          ul.list-group
            li.list-group-item
              p.lead(style="margin-bottom: 0;") Who to follow
              each suggestion in suggestions
                li.list-group-item
                  a(href="/users/" + suggestion.name)
                    strong #{suggestion.fullname}
                    span &nbsp;
                    span.text-muted @#{suggestion.name}
                  form(action="/follow/" + suggestion.name method="post")
                    button.btn.btn-default.btn-sm(type="submit") Follow
