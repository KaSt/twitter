extends layout

block styles
  link(rel="stylesheet", href="/css/style.css")

block content
  include components/menu

  nav.navbar.navbar-default.navbar-static-top(style="background-color: #fff;")
    .container
      .row
        .col-md-3.text-center
          h4
            a.text-gray-dark(href="/users/" + user.name)= user.fullname
          p
            a.text-muted(href="/users/" + user.name) @#{user.name}
        .col-md-6
          ul.nav.navbar-nav
            li.active
              a(href="/users/" + user.name)
                .text-center.text-muted TWEETS
                .text-center
                  strong #{count}
            li
              a(href="/users/" + user.name)
                .text-center.text-muted FOLLOWING
                .text-center
                  strong #{followings_count}
            li
              a(href="/users/" + user.name)
                .text-center.text-muted FOLLOWERS
                .text-center
                  strong #{followers_count}
            li
              a(href="/users/" + user.name)
                .text-center.text-muted FAVORITES
                .text-center
                  strong #{count}
        .col-md-3
          ul.nav.navbar-nav.navbar-right
            li
              div.text-center(style="padding: 18px 10px;")
                if is_me
                  a.btn.btn-default(href="/settings" role="button") Edit profile
                else if is_following
                  form(action="/follow/" + user.name method="post")
                    input(type="hidden" name="_method" value="delete")
                    input.btn.btn-default(type="submit" value="Unfollow")
                else
                  form(action="/follow/" + user.name method="post")
                    input.btn.btn-default(type="submit" value="Follow")

  .container
    .row
      .col-md-6.col-md-offset-3
        ul.list-group
          each tweet, i in tweets
            li.list-group-item
              p.list-group-item-heading
                a(href="/profile").text-gray-dark
                  strong #{tweet.user.fullname}
                  span &nbsp;
                  span.text-muted @#{tweet.user.name}
                span &nbsp;-&nbsp;
                a(href="/profile")
                  span.text-muted= tweet.created_at
              p.list-group-item-text(style="word-wrap: break-word; margin-bottom: 10px;")= tweet.text
              p.list-group-item-text
                ul.list-inline
                  li
                    span.glyphicon.glyphicon-star.text-muted
                  if is_me
                    li.dropdown
                      a.dropdown-toggle(href="#" data-toggle="dropdown" role="button" aria-expanded="true").text-muted
                        span.glyphicon.glyphicon-option-horizontal(aria-hidden="true")
                      ul.dropdown-menu(role="menu")
                        li(role="presentation")
                          //- Button trigger modal
                          a(role="menuitem" tabindex="-1" data-toggle="modal" href="#modal-delete-tweet-" + i)
                            | Delete tweet
                        //- Modal
                        .modal.fade(id='modal-delete-tweet-' + i, tabindex='-1', role='dialog', aria-labelledby='modal-label-delete-tweet-' + i, aria-hidden='true')
                          .modal-dialog
                            .modal-content
                              .modal-header
                                button.close(type="button", data-dismiss="modal", aria-label="Close")
                                  span(aria-hidden="true") Ã—
                                h4.modal-title(id="modal-label-delete-tweet-" + i) Are you sure you want to delete this Tweet?
                              .modal-body
                                p
                                  a(href="/profile").text-gray-dark
                                    strong #{tweet.user.fullname}
                                    span &nbsp;
                                    span.text-muted @#{tweet.user.name}
                                  span &nbsp;-&nbsp;
                                  a(href="/profile")
                                    span.text-muted= tweet.created_at
                                p(style="word-wrap: break-word;")= tweet.text
                              .modal-footer
                                form(action="/tweets/" + tweet.id method="post")
                                  button.btn.btn-default(type="button", data-dismiss="modal") Close
                                  input(type="hidden" name="_method" value="delete")
                                  input.btn.btn-primary(type="submit" value="Delete" style="margin-left: 5px;")
